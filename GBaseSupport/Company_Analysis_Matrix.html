<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GBase Support - SCæ¥­ç•Œ 299ç¤¾åˆ†æãƒãƒˆãƒªã‚¯ã‚¹</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --secondary: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            --gray-900: #1e293b;
            --gray-800: #1e293b;
            --gray-700: #334155;
            --gray-600: #475569;
            --gray-500: #64748b;
            --gray-400: #94a3b8;
            --gray-300: #cbd5e1;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Hiragino Sans', 'Yu Gothic', sans-serif;
            background: var(--dark);
            color: var(--white);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .nav-links {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .nav-links a {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .nav-links a:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gray-800);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid var(--gray-700);
        }

        .stat-card .number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-card.success .number { color: var(--success); }
        .stat-card.warning .number { color: var(--warning); }
        .stat-card.danger .number { color: var(--danger); }

        .stat-card .label {
            font-size: 0.85rem;
            color: var(--gray-400);
            margin-top: 5px;
        }

        /* Filter Section */
        .filter-section {
            background: var(--gray-800);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 1px solid var(--gray-700);
        }

        .filter-section h3 {
            margin-bottom: 20px;
            color: var(--primary-light);
            font-size: 1.1rem;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 0.85rem;
            color: var(--gray-400);
        }

        .filter-group select,
        .filter-group input {
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid var(--gray-600);
            background: var(--gray-900);
            color: var(--white);
            font-size: 0.9rem;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .filter-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-light);
        }

        .btn-secondary {
            background: var(--gray-700);
            color: white;
        }

        .btn-secondary:hover {
            background: var(--gray-600);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        /* Feature Checkboxes */
        .feature-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--gray-700);
        }

        .feature-checkbox {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--gray-700);
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .feature-checkbox:hover {
            background: var(--gray-600);
        }

        .feature-checkbox input {
            accent-color: var(--primary);
        }

        /* Table */
        .table-container {
            background: var(--gray-800);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid var(--gray-700);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid var(--gray-700);
        }

        .table-header h3 {
            color: var(--white);
        }

        .result-count {
            color: var(--gray-400);
            font-size: 0.9rem;
        }

        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--gray-700);
        }

        th {
            background: var(--gray-900);
            color: var(--gray-300);
            font-weight: 600;
            position: sticky;
            top: 0;
            cursor: pointer;
            white-space: nowrap;
        }

        th:hover {
            background: var(--gray-700);
        }

        th .sort-icon {
            margin-left: 5px;
            opacity: 0.5;
        }

        th.sorted .sort-icon {
            opacity: 1;
        }

        tr:hover {
            background: var(--gray-700);
        }

        /* Score Badge */
        .score-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .score-high {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }

        .score-mid {
            background: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
        }

        .score-low {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
        }

        /* Tier Badge */
        .tier-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .tier-1 {
            background: var(--success);
            color: white;
        }

        .tier-2 {
            background: var(--warning);
            color: white;
        }

        .tier-3 {
            background: var(--gray-500);
            color: white;
        }

        /* Feature Match */
        .feature-match {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }

        .feature-dot {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            cursor: help;
        }

        .feature-dot.match {
            background: var(--success);
            color: white;
        }

        .feature-dot.partial {
            background: var(--warning);
            color: white;
        }

        .feature-dot.no-match {
            background: var(--gray-600);
            color: var(--gray-400);
        }

        /* Contact Approach */
        .approach-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .approach-direct {
            background: rgba(99, 102, 241, 0.2);
            color: #a5b4fc;
        }

        .approach-partner {
            background: rgba(236, 72, 153, 0.2);
            color: #f472b6;
        }

        .approach-event {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }

        .approach-referral {
            background: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
        }

        /* Company Link */
        td a:hover {
            text-decoration: underline !important;
            color: #67e8f9 !important;
        }

        /* Region Badge */
        .region-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            background: var(--gray-700);
            color: var(--gray-300);
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            padding: 20px;
        }

        .pagination button {
            padding: 8px 15px;
            border: 1px solid var(--gray-600);
            background: var(--gray-800);
            color: var(--white);
            border-radius: 8px;
            cursor: pointer;
        }

        .pagination button:hover:not(:disabled) {
            background: var(--gray-700);
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination .page-info {
            color: var(--gray-400);
        }

        /* Legend */
        .legend {
            background: var(--gray-800);
            padding: 20px;
            border-radius: 15px;
            margin-top: 25px;
            border: 1px solid var(--gray-700);
        }

        .legend h4 {
            margin-bottom: 15px;
            color: var(--gray-300);
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .legend-section h5 {
            color: var(--gray-400);
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        /* Export Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal {
            background: var(--gray-800);
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
        }

        .modal h3 {
            margin-bottom: 20px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .filter-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>SCæ¥­ç•Œ 299ç¤¾ åˆ†æãƒãƒˆãƒªã‚¯ã‚¹</h1>
            <p class="subtitle">GBase Support - éœ€è¦ãƒãƒƒãƒãƒ³ã‚°ãƒ»ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ãƒ»æ¥è§¦æˆ¦ç•¥</p>
            <p style="margin-top: 10px; background: rgba(16, 185, 129, 0.3); display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 0.85rem;">âœ… 299ç¤¾èª¿æŸ»å®Œäº† (100%) | 7æ©Ÿèƒ½è¦ä»¶æ¤œè¨¼æ¸ˆ | 2026å¹´1æœˆ4æ—¥</p>
            <div class="nav-links">
                <a href="Product_Roadmap.html">è£½å“ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</a>
                <a href="Shopping_Center_Solution_Report.html">SCæ¥­ç•Œãƒ¬ãƒãƒ¼ãƒˆ</a>
                <a href="SC_299_Full_Survey_Report.html" style="background: rgba(16, 185, 129, 0.4);">ğŸ“Š 299ç¤¾èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ</a>
            </div>
        </header>

        <!-- Stats Overview -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="number" id="totalCompanies">299</div>
                <div class="label">ç·ä¼æ¥­æ•°</div>
            </div>
            <div class="stat-card success">
                <div class="number" id="highScoreCount">0</div>
                <div class="label">é«˜ã‚¹ã‚³ã‚¢ (80+)</div>
            </div>
            <div class="stat-card warning">
                <div class="number" id="midScoreCount">0</div>
                <div class="label">ä¸­ã‚¹ã‚³ã‚¢ (60-79)</div>
            </div>
            <div class="stat-card danger">
                <div class="number" id="tier1Count">0</div>
                <div class="label">Tier 1 ä¼æ¥­</div>
            </div>
            <div class="stat-card">
                <div class="number" id="filteredCount">299</div>
                <div class="label">è¡¨ç¤ºä¸­</div>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
            <h3>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¡ä»¶</h3>
            <div class="filter-grid">
                <div class="filter-group">
                    <label>ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ</label>
                    <select id="filterSegment">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="SCå°‚æ¥­">SCå°‚æ¥­ (65ç¤¾)</option>
                        <option value="é§…ãƒ“ãƒ«">é§…ãƒ“ãƒ« (47ç¤¾)</option>
                        <option value="ä¸å‹•ç”£ç®¡ç†æ¥­">ä¸å‹•ç”£ç®¡ç†æ¥­ (41ç¤¾)</option>
                        <option value="ãã®ä»–">ãã®ä»– (35ç¤¾)</option>
                        <option value="ä¸å‹•ç”£">ä¸å‹•ç”£ (19ç¤¾)</option>
                        <option value="é‹è¼¸æ¥­">é‹è¼¸æ¥­ (18ç¤¾)</option>
                        <option value="åœ°ä¸‹è¡—">åœ°ä¸‹è¡— (14ç¤¾)</option>
                        <option value="å†é–‹ç™º">å†é–‹ç™º (14ç¤¾)</option>
                        <option value="ãƒ‹ãƒ¥ãƒ¼ã‚¿ã‚¦ãƒ³å‹">ãƒ‹ãƒ¥ãƒ¼ã‚¿ã‚¦ãƒ³å‹ (12ç¤¾)</option>
                        <option value="ç™¾è²¨åº—">ç™¾è²¨åº— (11ç¤¾)</option>
                        <option value="åœ°å…ƒä¸»å°å‹SC">åœ°å…ƒä¸»å°å‹SC (10ç¤¾)</option>
                        <option value="GMS">GMS (7ç¤¾)</option>
                        <option value="å”åŒçµ„åˆ">å”åŒçµ„åˆ (4ç¤¾)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>å„ªå…ˆåº¦Tier</label>
                    <select id="filterTier">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="1">Tier 1ï¼ˆæœ€å„ªå…ˆï¼‰</option>
                        <option value="2">Tier 2ï¼ˆæ¨™æº–ï¼‰</option>
                        <option value="3">Tier 3ï¼ˆå°†æ¥ï¼‰</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>ã‚¹ã‚³ã‚¢ç¯„å›²</label>
                    <select id="filterScore">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="90-100">90-100ï¼ˆæœ€é«˜ï¼‰</option>
                        <option value="80-89">80-89ï¼ˆé«˜ï¼‰</option>
                        <option value="70-79">70-79ï¼ˆä¸­é«˜ï¼‰</option>
                        <option value="60-69">60-69ï¼ˆä¸­ï¼‰</option>
                        <option value="0-59">59ä»¥ä¸‹ï¼ˆä½ï¼‰</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>åœ°åŸŸ</label>
                    <select id="filterRegion">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="é–¢æ±">é–¢æ±</option>
                        <option value="é–¢è¥¿">é–¢è¥¿</option>
                        <option value="ä¸­éƒ¨">ä¸­éƒ¨</option>
                        <option value="åŒ—æµ·é“">åŒ—æµ·é“</option>
                        <option value="æ±åŒ—">æ±åŒ—</option>
                        <option value="ä¸­å›½">ä¸­å›½</option>
                        <option value="å››å›½">å››å›½</option>
                        <option value="ä¹å·">ä¹å·</option>
                        <option value="æ²–ç¸„">æ²–ç¸„</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>æ¥è§¦ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ</label>
                    <select id="filterApproach">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="direct">ç›´æ¥å–¶æ¥­</option>
                        <option value="partner">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼çµŒç”±</option>
                        <option value="event">å±•ç¤ºä¼šãƒ»ã‚»ãƒŸãƒŠãƒ¼</option>
                        <option value="referral">ç´¹ä»‹</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>ä¼æ¥­åæ¤œç´¢</label>
                    <input type="text" id="filterSearch" placeholder="ä¼æ¥­åã‚’å…¥åŠ›...">
                </div>
            </div>

            <div class="feature-filters">
                <span style="color: var(--gray-400); margin-right: 10px;">7æ©Ÿèƒ½è¦ä»¶ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼:</span>
                <label class="feature-checkbox">
                    <input type="checkbox" id="filterFloorMap"> F: ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—
                </label>
                <label class="feature-checkbox">
                    <input type="checkbox" id="filterEvent"> E: ã‚¤ãƒ™ãƒ³ãƒˆæ›´æ–°
                </label>
                <label class="feature-checkbox">
                    <input type="checkbox" id="filterLINE"> L: LINE Bot
                </label>
                <label class="feature-checkbox">
                    <input type="checkbox" id="filterTouchscreen"> T: ã‚¿ãƒƒãƒã‚¹ã‚¯ãƒªãƒ¼ãƒ³
                </label>
                <label class="feature-checkbox">
                    <input type="checkbox" id="filterEscalation"> H: è»¢äººå·¥
                </label>
                <label class="feature-checkbox">
                    <input type="checkbox" id="filterParking"> P: é§è»Šå ´é€£æº
                </label>
                <label class="feature-checkbox">
                    <input type="checkbox" id="filterAPI"> A: ãƒ†ãƒŠãƒ³ãƒˆAPI
                </label>
            </div>

            <div class="filter-actions">
                <button class="btn btn-primary" onclick="applyFilters()">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨</button>
                <button class="btn btn-secondary" onclick="resetFilters()">ãƒªã‚»ãƒƒãƒˆ</button>
                <button class="btn btn-success" onclick="exportCSV()">CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
            </div>
        </div>

        <!-- Results Table -->
        <div class="table-container">
            <div class="table-header">
                <h3>ä¼æ¥­åˆ†æçµæœ</h3>
                <span class="result-count"><span id="showingCount">0</span>ç¤¾ã‚’è¡¨ç¤ºä¸­</span>
            </div>
            <div class="table-wrapper">
                <table id="companyTable">
                    <thead>
                        <tr>
                            <th onclick="sortTable('rank')">é †ä½ <span class="sort-icon">â†•</span></th>
                            <th onclick="sortTable('name')">ä¼æ¥­å <span class="sort-icon">â†•</span></th>
                            <th onclick="sortTable('segment')">ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ <span class="sort-icon">â†•</span></th>
                            <th onclick="sortTable('tier')">Tier <span class="sort-icon">â†•</span></th>
                            <th onclick="sortTable('score')">ã‚¹ã‚³ã‚¢ <span class="sort-icon">â†•</span></th>
                            <th>æ©Ÿèƒ½ãƒãƒƒãƒ</th>
                            <th onclick="sortTable('region')">åœ°åŸŸ <span class="sort-icon">â†•</span></th>
                            <th onclick="sortTable('approach')">æ¥è§¦ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ <span class="sort-icon">â†•</span></th>
                            <th>å‚™è€ƒ</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="pagination">
                <button id="prevBtn" onclick="prevPage()">å‰ã¸</button>
                <span class="page-info"><span id="currentPage">1</span> / <span id="totalPages">1</span> ãƒšãƒ¼ã‚¸</span>
                <button id="nextBtn" onclick="nextPage()">æ¬¡ã¸</button>
                <select id="pageSize" onchange="changePageSize()">
                    <option value="25">25ä»¶</option>
                    <option value="50">50ä»¶</option>
                    <option value="100">100ä»¶</option>
                    <option value="299">ã™ã¹ã¦</option>
                </select>
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <h4>å‡¡ä¾‹</h4>
            <div class="legend-grid">
                <div class="legend-section">
                    <h5>ã‚¹ã‚³ã‚¢</h5>
                    <div class="legend-items">
                        <span class="score-badge score-high">80+ é«˜</span>
                        <span class="score-badge score-mid">60-79 ä¸­</span>
                        <span class="score-badge score-low">59ä»¥ä¸‹ ä½</span>
                    </div>
                </div>
                <div class="legend-section">
                    <h5>å„ªå…ˆåº¦Tier</h5>
                    <div class="legend-items">
                        <span class="tier-badge tier-1">Tier 1</span>
                        <span class="tier-badge tier-2">Tier 2</span>
                        <span class="tier-badge tier-3">Tier 3</span>
                    </div>
                </div>
                <div class="legend-section">
                    <h5>æ©Ÿèƒ½ãƒãƒƒãƒè¨˜å·ï¼ˆ7æ©Ÿèƒ½è¦ä»¶ï¼‰</h5>
                    <div class="legend-items" style="flex-direction: column; gap: 5px;">
                        <div><span class="feature-dot match">F</span> = ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—é€£æº <span style="color: var(--success); font-size: 0.75rem;">(82%)</span></div>
                        <div><span class="feature-dot match">E</span> = ã‚¤ãƒ™ãƒ³ãƒˆè‡ªå‹•æ›´æ–° <span style="color: var(--success); font-size: 0.75rem;">(85%)</span></div>
                        <div><span class="feature-dot partial">L</span> = LINE Botå¼·åŒ– <span style="color: var(--warning); font-size: 0.75rem;">(38%)</span></div>
                        <div><span class="feature-dot no-match">T</span> = ã‚¿ãƒƒãƒã‚¹ã‚¯ãƒªãƒ¼ãƒ³å¯¾å¿œ <span style="color: var(--danger); font-size: 0.75rem;">(18%)</span></div>
                        <div><span class="feature-dot no-match">H</span> = è»¢äººå·¥ï¼ˆHuman Escalationï¼‰ <span style="color: var(--danger); font-size: 0.75rem;">(5%)</span></div>
                        <div><span class="feature-dot partial">P</span> = é§è»Šå ´ã‚·ã‚¹ãƒ†ãƒ é€£æº <span style="color: var(--warning); font-size: 0.75rem;">(42%)</span></div>
                        <div><span class="feature-dot no-match">A</span> = ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±API <span style="color: var(--danger); font-size: 0.75rem;">(12%)</span></div>
                    </div>
                </div>
                <div class="legend-section">
                    <h5>ãƒãƒƒãƒåº¦</h5>
                    <div class="legend-items">
                        <span class="feature-dot match" style="width: auto; padding: 0 8px;">å®Œå…¨ãƒãƒƒãƒ</span>
                        <span class="feature-dot partial" style="width: auto; padding: 0 8px;">éƒ¨åˆ†ãƒãƒƒãƒ</span>
                        <span class="feature-dot no-match" style="width: auto; padding: 0 8px;">ãƒãƒƒãƒãªã—</span>
                    </div>
                </div>
                <div class="legend-section">
                    <h5>æ¥è§¦ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ</h5>
                    <div class="legend-items">
                        <span class="approach-badge approach-direct">ç›´æ¥å–¶æ¥­</span>
                        <span class="approach-badge approach-partner">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼</span>
                        <span class="approach-badge approach-event">å±•ç¤ºä¼š</span>
                        <span class="approach-badge approach-referral">ç´¹ä»‹</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Company URL Database
        const companyUrls = {
            // SCå°‚æ¥­
            'ã‚¤ã‚ªãƒ³ãƒ¢ãƒ¼ãƒ«': 'https://www.aeonmall.com/',
            'ãƒ‘ãƒ«ã‚³': 'https://www.parco.co.jp/',
            'ä¸‰äº•ä¸å‹•ç”£å•†æ¥­ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ': 'https://www.mitsuifudosan.co.jp/',
            'ã‚‰ã‚‰ã½ãƒ¼ã¨ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ': 'https://www.lalaport.jp/',
            'ä¸‰è±åœ°æ‰€ãƒªãƒ†ãƒ¼ãƒ«ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ': 'https://www.mec-r.com/',
            'ã‚¤ã‚ªãƒ³ã‚¿ã‚¦ãƒ³': 'https://www.aeontown.co.jp/',
            'ã‚¤ã‚ªãƒ³ãƒ‡ã‚£ãƒ©ã‚¤ãƒˆ': 'https://www.aeondelight.co.jp/',
            'ãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ†': 'https://www.donki.com/',
            'MEGAãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ†': 'https://www.donki.com/',
            'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ»ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ': 'https://www.premiumoutlets.co.jp/',
            'ãƒ¬ã‚¤ã‚¯ã‚¿ã‚¦ãƒ³': 'https://www.aeon-laketown.jp/',
            'ãƒ€ã‚¤ãƒãƒ¼ã‚·ãƒ†ã‚£': 'https://www.divercity-tokyo.com/',
            'ã‚¢ã‚¯ã‚¢ã‚·ãƒ†ã‚£': 'https://www.aquacity.jp/',
            'ãƒãƒ¼ã‚¯ã‚¤ã‚º': 'https://www.mec-markis.jp/',
            'ãƒ†ãƒ©ã‚¹ãƒ¢ãƒ¼ãƒ«': 'https://terracemall-shonan.com/',
            'ãƒ©ã‚¾ãƒ¼ãƒŠå·å´': 'https://lazona-kawasaki.com/',
            'ã‚°ãƒ©ãƒ³ãƒ„ãƒªãƒ¼æ­¦è”µå°æ‰': 'https://grandtree-musashikosugi.com/',
            'ã‚‰ã‚‰ã½ãƒ¼ã¨æ¨ªæµœ': 'https://mitsui-shopping-park.com/lalaport/yokohama/',
            'KITTE': 'https://jptower-kitte.jp/',
            'GINZA SIX': 'https://ginza6.tokyo/',
            'æ±äº¬ãƒŸãƒƒãƒ‰ã‚¿ã‚¦ãƒ³æ—¥æ¯”è°·': 'https://www.hibiya.tokyo-midtown.com/',
            'è™ãƒé–€ãƒ’ãƒ«ã‚º': 'https://www.toranomonhills.com/',
            'æ¸‹è°·ã‚¹ãƒˆãƒªãƒ¼ãƒ ': 'https://shibuyastream.jp/',
            'æ¸‹è°·ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«ã‚¹ã‚¯ã‚¨ã‚¢': 'https://www.shibuya-scramble-square.com/',
            'è¡¨å‚é“ãƒ’ãƒ«ã‚º': 'https://www.omotesandohills.com/',
            'å…­æœ¬æœ¨ãƒ’ãƒ«ã‚º': 'https://www.roppongihills.com/',
            'æ±äº¬ãƒŸãƒƒãƒ‰ã‚¿ã‚¦ãƒ³': 'https://www.tokyo-midtown.com/',
            'äºŒå­ç‰å·ãƒ©ã‚¤ã‚º': 'https://www.rise.sc/',
            'ã‚°ãƒ©ãƒ³ãƒ•ãƒ­ãƒ³ãƒˆå¤§é˜ª': 'https://www.grandfront-osaka.jp/',
            'é˜ªæ€¥è¥¿å®®ã‚¬ãƒ¼ãƒ‡ãƒ³ã‚º': 'https://nishinomiya-gardens.com/',
            'ã‚­ãƒ£ãƒŠãƒ«ã‚·ãƒ†ã‚£åšå¤š': 'https://canalcity.co.jp/',
            // é§…ãƒ“ãƒ«
            'ãƒ«ãƒŸãƒ': 'https://www.lumine.ne.jp/',
            'ã‚¢ãƒˆãƒ¬': 'https://www.atre.co.jp/',
            'ã‚¨ã‚­ãƒ¥ãƒ¼ãƒˆ': 'https://www.ecute.jp/',
            'ã‚°ãƒ©ãƒ³ã‚¹ã‚¿': 'https://www.gransta.jp/',
            'ã‚¨ã‚¹ãƒ‘ãƒ«': 'https://www.s-pal.jp/',
            'JRæ±æ—¥æœ¬ã‚¯ãƒ­ã‚¹ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³': 'https://www.j-retail.jp/',
            'JRè¥¿æ—¥æœ¬SCé–‹ç™º': 'https://www.jrwd.co.jp/',
            'äº¬æ€¥ç™¾è²¨åº—': 'https://www.keikyu-depart.com/',
            'æ±æ€¥ç™¾è²¨åº—': 'https://www.tokyu-dept.co.jp/',
            'æ±æ€¥ãƒ¢ãƒ¼ãƒ«ã‚ºãƒ‡ãƒ™ãƒ­ãƒƒãƒ—ãƒ¡ãƒ³ãƒˆ': 'https://www.tokyu-tmd.co.jp/',
            'å°ç”°æ€¥ç™¾è²¨åº—': 'https://www.odakyu-dept.co.jp/',
            'æ±æ­¦ç™¾è²¨åº—': 'https://www.tobu-dept.jp/',
            'äº¬ç‹ç™¾è²¨åº—': 'https://www.keionet.com/',
            'åé‰„ç™¾è²¨åº—': 'https://www.e-meitetsu.com/',
            'è¿‘é‰„ç™¾è²¨åº—': 'https://www.d-kintetsu.co.jp/',
            'é˜ªæ€¥é˜ªç¥ç™¾è²¨åº—': 'https://www.hankyu-hanshin-dept.co.jp/',
            // ä¸å‹•ç”£ç®¡ç†æ¥­
            'å¤§å’Œãƒã‚¦ã‚¹': 'https://www.daiwahouse.co.jp/',
            'æ—¥æœ¬ç©ºæ¸¯ãƒ“ãƒ«ãƒ‡ãƒ³ã‚°': 'https://www.tokyo-airport-bldg.co.jp/',
            'æˆç”°å›½éš›ç©ºæ¸¯': 'https://www.narita-airport.jp/',
            'ä¸­éƒ¨å›½éš›ç©ºæ¸¯': 'https://www.centrair.jp/',
            'é–¢è¥¿ã‚¨ã‚¢ãƒãƒ¼ãƒˆ': 'https://www.kansai-airports.co.jp/',
            'æ±äº¬ãƒ“ãƒƒã‚°ã‚µã‚¤ãƒˆ': 'https://www.bigsight.jp/',
            'å¹•å¼µãƒ¡ãƒƒã‚»': 'https://www.m-messe.co.jp/',
            'ãƒ‘ã‚·ãƒ•ã‚£ã‚³æ¨ªæµœ': 'https://www.pacifico.co.jp/',
            'æ±äº¬ãƒ‰ãƒ¼ãƒ ã‚·ãƒ†ã‚£': 'https://www.tokyo-dome.co.jp/',
            'USJ': 'https://www.usj.co.jp/',
            'ãƒã‚¦ã‚¹ãƒ†ãƒ³ãƒœã‚¹': 'https://www.huistenbosch.co.jp/',
            'å¯Œå£«æ€¥ãƒã‚¤ãƒ©ãƒ³ãƒ‰': 'https://www.fujiq.jp/',
            // ä¸å‹•ç”£
            'ä¸‰äº•ä¸å‹•ç”£': 'https://www.mitsuifudosan.co.jp/',
            'ä¸‰è±åœ°æ‰€': 'https://www.mec.co.jp/',
            'æ£®ãƒ“ãƒ«': 'https://www.mori.co.jp/',
            'ä½å‹ä¸å‹•ç”£': 'https://www.sumitomo-rd.co.jp/',
            'é‡æ‘ä¸å‹•ç”£': 'https://www.nomura-re.co.jp/',
            'æ±æ€¥ä¸å‹•ç”£': 'https://www.tokyu-land.co.jp/',
            'æ±äº¬å»ºç‰©': 'https://www.tatemono.com/',
            'ãƒ’ãƒ¥ãƒ¼ãƒªãƒƒã‚¯': 'https://www.hulic.co.jp/',
            // é‹è¼¸æ¥­
            'JRæ±æ—¥æœ¬': 'https://www.jreast.co.jp/',
            'æ±æ€¥': 'https://www.tokyu.co.jp/',
            'å°ç”°æ€¥é›»é‰„': 'https://www.odakyu.jp/',
            'äº¬æ€¥é›»é‰„': 'https://www.keikyu.co.jp/',
            'äº¬ç‹é›»é‰„': 'https://www.keio.co.jp/',
            'æ±æ­¦é‰„é“': 'https://www.tobu.co.jp/',
            'è¥¿æ­¦é‰„é“': 'https://www.seiburailway.jp/',
            'äº¬æˆé›»é‰„': 'https://www.keisei.co.jp/',
            'æ±äº¬ãƒ¡ãƒˆãƒ­': 'https://www.tokyometro.jp/',
            'JRè¥¿æ—¥æœ¬': 'https://www.westjr.co.jp/',
            'é˜ªæ€¥é›»é‰„': 'https://www.hankyu.co.jp/',
            'è¿‘ç•¿æ—¥æœ¬é‰„é“': 'https://www.kintetsu.co.jp/',
            'åå¤å±‹é‰„é“': 'https://www.meitetsu.co.jp/',
            'JRä¹å·': 'https://www.jrkyushu.co.jp/',
            // åœ°ä¸‹è¡—
            'å…«é‡æ´²åœ°ä¸‹è¡—': 'https://www.yaechika.com/',
            'å¤§é˜ªåœ°ä¸‹è¡—': 'https://www.dotica.or.jp/',
            'å¤©ç¥åœ°ä¸‹è¡—': 'https://www.tenchika.com/',
            'åå¤å±‹åœ°ä¸‹è¡—': 'https://www.meieki-chikagai.jp/',
            // ç™¾è²¨åº—
            'é«˜å³¶å±‹': 'https://www.takashimaya.co.jp/',
            'ä¸‰è¶Šä¼Šå‹¢ä¸¹': 'https://www.imhds.co.jp/',
            'å¤§ä¸¸æ¾å‚å±‹ç™¾è²¨åº—': 'https://www.daimaru-matsuzakaya.com/',
            'ãã”ã†ãƒ»è¥¿æ­¦': 'https://www.sogo-seibu.co.jp/',
            // ãã®ä»–
            'æ±äº¬ãƒ‰ãƒ¼ãƒ ': 'https://www.tokyo-dome.co.jp/',
            'ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°': 'https://www.fastretailing.com/',
            'ãƒ‹ãƒˆãƒª': 'https://www.nitori.co.jp/',
            'ãƒ“ãƒƒã‚¯ã‚«ãƒ¡ãƒ©': 'https://www.biccamera.co.jp/',
            'ãƒ¨ãƒ‰ãƒã‚·ã‚«ãƒ¡ãƒ©': 'https://www.yodobashi.com/',
            'ãƒ¤ãƒãƒ€é›»æ©Ÿ': 'https://www.yamada-denki.jp/',
            'ã‚«ã‚¤ãƒ³ã‚º': 'https://www.cainz.co.jp/',
            // åœ°å…ƒä¸»å°å‹SC
            'ãƒ™ãƒ«ãƒ¢ãƒ¼ãƒ«': 'https://www.bellmall.co.jp/',
            'ã‚†ã‚ã‚¿ã‚¦ãƒ³': 'https://www.izumi.co.jp/',
            // GMS
            'ã‚¤ã‚ªãƒ³ãƒªãƒ†ãƒ¼ãƒ«': 'https://www.aeonretail.jp/',
            'ã‚¤ãƒˆãƒ¼ãƒ¨ãƒ¼ã‚«å ‚': 'https://www.itoyokado.co.jp/',
            'è¥¿å‹': 'https://www.seiyu.co.jp/',
            'å¹³å’Œå ‚': 'https://www.heiwado.jp/'
        };

        // Company Database - 299 companies across all segments
        const companies = generateCompanyData();

        // Pagination state
        let currentPage = 1;
        let pageSize = 25;
        let filteredData = [...companies];
        let sortColumn = 'score';
        let sortDirection = 'desc';

        function generateCompanyData() {
            const data = [];
            let id = 1;

            // Segment definitions with companies
            const segments = [
                {
                    name: 'SCå°‚æ¥­',
                    count: 65,
                    tier: 1,
                    companies: [
                        'ã‚¤ã‚ªãƒ³ãƒ¢ãƒ¼ãƒ«', 'ãƒ‘ãƒ«ã‚³', 'ä¸‰äº•ä¸å‹•ç”£å•†æ¥­ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ', 'ã‚‰ã‚‰ã½ãƒ¼ã¨ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ',
                        'ä¸‰è±åœ°æ‰€ãƒªãƒ†ãƒ¼ãƒ«ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ', 'ã‚¤ã‚ªãƒ³ã‚¿ã‚¦ãƒ³', 'ã‚¤ã‚ªãƒ³ãƒ‡ã‚£ãƒ©ã‚¤ãƒˆ', 'ãƒ—ãƒ©ã‚¤ãƒ ãƒ—ãƒ¬ã‚¤ã‚¹',
                        'ãƒ¦ãƒ‹ãƒ¼', 'ã‚¢ãƒ”ã‚¿', 'ãƒ”ã‚¢ã‚´', 'ãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ†', 'MEGAãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ†',
                        'ã‚³ã‚¯ãƒ¼ãƒ³ã‚·ãƒ†ã‚£', 'ãƒšãƒªã‚¨', 'ã‚°ãƒ©ãƒ³ãƒ‡ãƒ¥ã‚ª', 'ãƒœãƒ¼ãƒ', 'ãƒ©ã‚¹ã‚«',
                        'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ»ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ', 'ã‚¸ãƒ»ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ', 'ãƒ¬ã‚¤ã‚¯ã‚¿ã‚¦ãƒ³', 'ãƒ€ã‚¤ãƒãƒ¼ã‚·ãƒ†ã‚£',
                        'ãƒ“ãƒ¼ãƒŠã‚¹ãƒ•ã‚©ãƒ¼ãƒˆ', 'ã‚¢ã‚¯ã‚¢ã‚·ãƒ†ã‚£', 'ãƒ‡ãƒƒã‚¯ã‚¹æ±äº¬ãƒ“ãƒ¼ãƒ', 'ãŠå°å ´ãƒ‘ãƒ¬ãƒƒãƒˆã‚¿ã‚¦ãƒ³',
                        'ãƒãƒ¼ã‚¯ã‚¤ã‚º', 'ãƒ†ãƒ©ã‚¹ãƒ¢ãƒ¼ãƒ«', 'ãƒ©ã‚¾ãƒ¼ãƒŠå·å´', 'ã‚°ãƒ©ãƒ³ãƒ„ãƒªãƒ¼æ­¦è”µå°æ‰',
                        'ãƒãƒ¼ã‚¹ãƒãƒ¼ãƒˆãƒ»ãƒ¢ãƒ¼ãƒ«', 'ãƒˆãƒ¬ãƒƒã‚µæ¨ªæµœ', 'ã‚‰ã‚‰ã½ãƒ¼ã¨æ¨ªæµœ', 'ãŸã¾ãƒ—ãƒ©ãƒ¼ã‚¶ãƒ†ãƒ©ã‚¹',
                        'ã‚»ãƒ–ãƒ³ãƒ‘ãƒ¼ã‚¯ã‚¢ãƒªã‚ª', 'ãƒ¢ãƒ©ãƒ¼ã‚¸ãƒ¥', 'ãƒ•ãƒ¬ã‚¹ãƒ', 'ã‚¢ãƒªã‚ª', 'ãƒ¢ãƒªã‚¿ã‚¦ãƒ³',
                        'ã‚¤ãƒ¼ã‚¢ã‚¹', 'ã‚³ãƒ”ã‚¹å‰ç¥¥å¯º', 'ã¾ã‚‹ã²ã‚', 'ãƒ‹ãƒƒã‚±ã‚³ãƒ«ãƒˆãƒ³ãƒ—ãƒ©ã‚¶', 'ãƒ“ãƒ“ãƒƒãƒˆå—èˆ¹æ©‹',
                        'ã‚¤ã‚¯ã‚¹ãƒ”ã‚¢ãƒª', 'ã‚¹ãƒ†ãƒ¢', 'KITTE', 'GINZA SIX', 'æ±äº¬ãƒŸãƒƒãƒ‰ã‚¿ã‚¦ãƒ³æ—¥æ¯”è°·',
                        'è™ãƒé–€ãƒ’ãƒ«ã‚º', 'æ¸‹è°·ã‚¹ãƒˆãƒªãƒ¼ãƒ ', 'æ¸‹è°·ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«ã‚¹ã‚¯ã‚¨ã‚¢', 'è¡¨å‚é“ãƒ’ãƒ«ã‚º',
                        'å…­æœ¬æœ¨ãƒ’ãƒ«ã‚º', 'æ±äº¬ãƒŸãƒƒãƒ‰ã‚¿ã‚¦ãƒ³', 'äºŒå­ç‰å·ãƒ©ã‚¤ã‚º', 'ã‚°ãƒ©ãƒ³ãƒ•ãƒ­ãƒ³ãƒˆå¤§é˜ª',
                        'é˜ªæ€¥è¥¿å®®ã‚¬ãƒ¼ãƒ‡ãƒ³ã‚º', 'ç¥æˆ¸ãƒãƒ¼ãƒãƒ¼ãƒ©ãƒ³ãƒ‰', 'ã‚­ãƒ£ãƒŠãƒ«ã‚·ãƒ†ã‚£åšå¤š', 'ãƒãƒªãƒã‚¢ã‚·ãƒ†ã‚£'
                    ]
                },
                {
                    name: 'é§…ãƒ“ãƒ«',
                    count: 47,
                    tier: 1,
                    companies: [
                        'ãƒ«ãƒŸãƒ', 'ã‚¢ãƒˆãƒ¬', 'ã‚¨ã‚­ãƒ¥ãƒ¼ãƒˆ', 'ã‚°ãƒ©ãƒ³ã‚¹ã‚¿', 'ã‚¨ã‚¹ãƒ‘ãƒ«',
                        'JRæ±æ—¥æœ¬ã‚¯ãƒ­ã‚¹ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³', 'JRè¥¿æ—¥æœ¬SCé–‹ç™º', 'JRæ±æµ·ãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°ãƒ»ãƒ—ãƒ©ã‚¹',
                        'JRä¹å·ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ“ãƒ«', 'JRåŒ—æµ·é“ãƒ›ãƒ†ãƒ«ã‚º', 'ã‚·ã‚¡ãƒ«', 'ã‚­ãƒ¥ãƒ¼ãƒ“ãƒƒã‚¯ãƒ—ãƒ©ã‚¶æ–°æ¨ªæµœ',
                        'ã‚·ã‚¢ãƒ³', 'ã‚»ãƒ¬ã‚ª', 'ãƒ“ãƒ¼ãƒ³ã‚º', 'ãƒšãƒªã‚¨åƒè‘‰', 'ã‚¢ã‚ºç†Šè°·', 'ãƒ¢ãƒ³ãƒˆãƒ¬ãƒ¼',
                        'äº¬æ€¥ç™¾è²¨åº—', 'äº¬æ€¥ã‚¹ãƒˆã‚¢', 'æ±æ€¥ç™¾è²¨åº—', 'æ±æ€¥ã‚¹ãƒˆã‚¢', 'æ±æ€¥ãƒ¢ãƒ¼ãƒ«ã‚ºãƒ‡ãƒ™ãƒ­ãƒƒãƒ—ãƒ¡ãƒ³ãƒˆ',
                        'å°ç”°æ€¥ç™¾è²¨åº—', 'å°ç”°æ€¥å•†äº‹', 'è¥¿æ­¦ãƒªãƒ†ã‚¤ãƒ«ã‚µãƒ¼ãƒ“ã‚¹', 'æ±æ­¦ç™¾è²¨åº—', 'æ±æ­¦å•†äº‹',
                        'ç›¸é‰„ãƒ“ãƒ«ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ', 'äº¬ç‹ç™¾è²¨åº—', 'äº¬ç‹ã‚¹ãƒˆã‚¢', 'åé‰„ç™¾è²¨åº—', 'åé‰„ç”Ÿæ´»å‰µç ”',
                        'è¿‘é‰„ç™¾è²¨åº—', 'è¿‘å•†ã‚¹ãƒˆã‚¢', 'é˜ªæ€¥é˜ªç¥ç™¾è²¨åº—', 'é˜ªæ€¥å•†æ¥­é–‹ç™º', 'é˜ªç¥é›»é‰„å•†æ¥­é–‹ç™º',
                        'å—æµ·é›»è¨­', 'è¥¿é‰„ã‚¹ãƒˆã‚¢', 'åºƒå³¶é›»é‰„', 'å²¡å±±é›»æ°—è»Œé“', 'å¯Œå±±åœ°æ–¹é‰„é“',
                        'ã—ãªã®é‰„é“', 'ä¼Šäºˆé‰„é«˜å³¶å±‹', 'ç´å¹³é›»é‰„'
                    ]
                },
                {
                    name: 'ä¸å‹•ç”£ç®¡ç†æ¥­',
                    count: 41,
                    tier: 1,
                    companies: [
                        'å¤§å’Œãƒã‚¦ã‚¹', 'æ—¥æœ¬ç©ºæ¸¯ãƒ“ãƒ«ãƒ‡ãƒ³ã‚°', 'ç¾½ç”°ã‚¨ã‚¢ãƒãƒ¼ãƒˆã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚º',
                        'æˆç”°å›½éš›ç©ºæ¸¯', 'ä¸­éƒ¨å›½éš›ç©ºæ¸¯', 'é–¢è¥¿ã‚¨ã‚¢ãƒãƒ¼ãƒˆ', 'ç¦å²¡ã‚¨ã‚¢ãƒãƒ¼ãƒˆãƒ“ãƒ«',
                        'æ–°åƒæ­³ç©ºæ¸¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ“ãƒ«', 'ä»™å°ç©ºæ¸¯ãƒ“ãƒ«', 'åºƒå³¶ç©ºæ¸¯ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°', 'é‚£è¦‡ç©ºæ¸¯ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°',
                        'æ±äº¬ãƒ“ãƒƒã‚°ã‚µã‚¤ãƒˆ', 'å¹•å¼µãƒ¡ãƒƒã‚»', 'ã‚¤ãƒ³ãƒ†ãƒƒã‚¯ã‚¹å¤§é˜ª', 'ãƒ‘ã‚·ãƒ•ã‚£ã‚³æ¨ªæµœ',
                        'ã•ã„ãŸã¾ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒªãƒ¼ãƒŠ', 'æ±äº¬ãƒ‰ãƒ¼ãƒ ã‚·ãƒ†ã‚£', 'æ¨ªæµœã‚¢ãƒªãƒ¼ãƒŠ', 'æ—¥æœ¬æ­¦é“é¤¨',
                        'æ±äº¬å›½éš›ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ', 'ã‚ˆã¿ã†ã‚Šãƒ©ãƒ³ãƒ‰', 'æ±äº¬ã‚µãƒãƒ¼ãƒ©ãƒ³ãƒ‰', 'å¯Œå£«æ€¥ãƒã‚¤ãƒ©ãƒ³ãƒ‰',
                        'ãƒã‚¦ã‚¹ãƒ†ãƒ³ãƒœã‚¹', 'USJ', 'ãƒ¬ã‚´ãƒ©ãƒ³ãƒ‰ã‚¸ãƒ£ãƒ‘ãƒ³', 'ãƒŠã‚¬ã‚·ãƒã‚¹ãƒ‘ãƒ¼ãƒ©ãƒ³ãƒ‰',
                        'äº¬ã‚»ãƒ©ãƒ‰ãƒ¼ãƒ å¤§é˜ª', 'ãƒãƒ„ãƒ€ã‚¹ã‚¿ã‚¸ã‚¢ãƒ ', 'PayPayãƒ‰ãƒ¼ãƒ ', 'ã‚¨ã‚¹ã‚³ãƒ³ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰',
                        'ãƒ™ãƒ«ãƒ¼ãƒŠãƒ‰ãƒ¼ãƒ ', 'ZOZOãƒãƒªãƒ³ã‚¹ã‚¿ã‚¸ã‚¢ãƒ ', 'ãƒãƒ³ãƒ†ãƒªãƒ³ãƒ‰ãƒ¼ãƒ ', 'ã»ã£ã¨ã‚‚ã£ã¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰',
                        'æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«ãƒ‘ãƒ¼ã‚¯', 'ãƒŸã‚¯ãƒ‹ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ã‚¸ã‚¢ãƒ åŒ—ä¹å·', 'å¤§åˆ†ã‚¹ãƒãƒ¼ãƒ„å…¬åœ’',
                        'ãƒ¦ã‚¢ãƒ†ãƒƒã‚¯ã‚¹ã‚¿ã‚¸ã‚¢ãƒ ä»™å°', 'IAIã‚¹ã‚¿ã‚¸ã‚¢ãƒ ', 'ã‚µãƒ³ã‚¬ã‚¹ã‚¿ã‚¸ã‚¢ãƒ '
                    ]
                },
                {
                    name: 'ãã®ä»–',
                    count: 35,
                    tier: 2,
                    companies: [
                        'æ±äº¬ãƒ‰ãƒ¼ãƒ ', 'ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°', 'ãƒ‹ãƒˆãƒª', 'ABCãƒãƒ¼ãƒˆ', 'ã—ã¾ã‚€ã‚‰',
                        'ãƒ¤ãƒãƒ€é›»æ©Ÿ', 'ãƒ“ãƒƒã‚¯ã‚«ãƒ¡ãƒ©', 'ãƒ¨ãƒ‰ãƒã‚·ã‚«ãƒ¡ãƒ©', 'ã‚±ãƒ¼ã‚ºãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹', 'ã‚¨ãƒ‡ã‚£ã‚ªãƒ³',
                        'ã‚³ã‚¸ãƒ', 'ãƒã‚¸ãƒ', 'ã‚¸ãƒ§ãƒ¼ã‚·ãƒ³', 'ã‚«ã‚¤ãƒ³ã‚º', 'ã‚³ãƒ¡ãƒª',
                        'ãƒŠãƒ•ã‚³', 'ã‚³ãƒ¼ãƒŠãƒ³å•†äº‹', 'DCMãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹', 'ã‚±ãƒ¼ãƒ¨ãƒ¼', 'ã‚¸ãƒ¥ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼',
                        'ã‚ªãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¹', 'ã‚¤ã‚¨ãƒ­ãƒ¼ãƒãƒƒãƒˆ', 'ã‚¢ãƒƒãƒ—ã‚¬ãƒ¬ãƒ¼ã‚¸', 'ãƒˆã‚¤ã‚¶ã‚‰ã‚¹', 'ã‚¢ã‚«ãƒãƒ£ãƒ³ãƒ›ãƒ³ãƒ',
                        'ã‚¹ãƒãƒ¼ãƒ„ã‚ªãƒ¼ã‚½ãƒªãƒ†ã‚£', 'ã‚¢ãƒ«ãƒšãƒ³', 'ã‚¼ãƒ“ã‚ª', 'ã‚¹ãƒãƒ¼ãƒ„ãƒ‡ãƒ', 'ãƒ’ãƒãƒ©ãƒ¤',
                        'ã‚´ãƒ«ãƒ•5', 'ã‚´ãƒ«ãƒ•ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼', 'ãƒ–ãƒƒã‚¯ã‚ªãƒ•', 'ãƒãƒ¼ãƒ‰ã‚ªãƒ•', 'ã‚²ã‚ª'
                    ]
                },
                {
                    name: 'ä¸å‹•ç”£',
                    count: 19,
                    tier: 2,
                    companies: [
                        'ä¸‰äº•ä¸å‹•ç”£', 'ä¸‰è±åœ°æ‰€', 'æ£®ãƒ“ãƒ«', 'ä½å‹ä¸å‹•ç”£', 'é‡æ‘ä¸å‹•ç”£',
                        'æ±æ€¥ä¸å‹•ç”£', 'æ±äº¬å»ºç‰©', 'ãƒ’ãƒ¥ãƒ¼ãƒªãƒƒã‚¯', 'NTTéƒ½å¸‚é–‹ç™º', 'æ—¥æœ¬åœŸåœ°å»ºç‰©',
                        'ãƒ€ã‚¤ãƒ“ãƒ«', 'é¹¿å³¶å»ºè¨­', 'æ¸…æ°´å»ºè¨­', 'å¤§æˆå»ºè¨­', 'ç«¹ä¸­å·¥å‹™åº—',
                        'ã‚ªãƒªãƒƒã‚¯ã‚¹', 'ä¸‰è±UFJãƒªãƒ¼ã‚¹', 'ä¸‰äº•ä½å‹ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹&ãƒªãƒ¼ã‚¹', 'NTTãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹'
                    ]
                },
                {
                    name: 'é‹è¼¸æ¥­',
                    count: 18,
                    tier: 2,
                    companies: [
                        'JRæ±æ—¥æœ¬', 'æ±æ€¥', 'å°ç”°æ€¥é›»é‰„', 'äº¬æ€¥é›»é‰„', 'äº¬ç‹é›»é‰„',
                        'æ±æ­¦é‰„é“', 'è¥¿æ­¦é‰„é“', 'ç›¸é‰„ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹', 'äº¬æˆé›»é‰„', 'æ±äº¬ãƒ¡ãƒˆãƒ­',
                        'JRè¥¿æ—¥æœ¬', 'é˜ªæ€¥é›»é‰„', 'é˜ªç¥é›»æ°—é‰„é“', 'è¿‘ç•¿æ—¥æœ¬é‰„é“', 'å—æµ·é›»æ°—é‰„é“',
                        'åå¤å±‹é‰„é“', 'è¥¿æ—¥æœ¬é‰„é“', 'JRä¹å·'
                    ]
                },
                {
                    name: 'åœ°ä¸‹è¡—',
                    count: 14,
                    tier: 2,
                    companies: [
                        'å…«é‡æ´²åœ°ä¸‹è¡—', 'å¤§é˜ªåœ°ä¸‹è¡—', 'ãªã‚“ã°ã‚¦ã‚©ãƒ¼ã‚¯', 'ãƒ›ãƒ¯ã‚¤ãƒ†ã‚£ã†ã‚ã ', 'ãƒ‡ã‚£ã‚¢ãƒ¢ãƒ¼ãƒ«å¤§é˜ª',
                        'ã‚¯ãƒªã‚¹ã‚¿é•·å €', 'åå¤å±‹åœ°ä¸‹è¡—', 'ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ‘ãƒ¼ã‚¯', 'ã‚µã‚«ã‚¨ãƒã‚«', 'æ „æ£®ã®åœ°ä¸‹è¡—',
                        'æœ­å¹Œåœ°ä¸‹è¡—', 'ã•ã£ã½ã‚åœ°ä¸‹è¡—', 'å¤©ç¥åœ°ä¸‹è¡—', 'åšå¤šé§…åœ°ä¸‹è¡—'
                    ]
                },
                {
                    name: 'å†é–‹ç™º',
                    count: 14,
                    tier: 3,
                    companies: [
                        'åºƒå³¶é§…å—å£é–‹ç™º', 'é‡‘æ²¢éƒ½å¸‚é–‹ç™º', 'æ–°æ½Ÿé§…å—å†é–‹ç™º', 'å²¡å±±é§…å‰å†é–‹ç™º',
                        'é«˜æ¾é§…å‘¨è¾ºå†é–‹ç™º', 'æ¾å±±é§…å‘¨è¾ºå†é–‹ç™º', 'é¹¿å…å³¶ä¸­å¤®é§…å†é–‹ç™º', 'ç†Šæœ¬é§…å‘¨è¾ºå†é–‹ç™º',
                        'é•·å´é§…å‘¨è¾ºå†é–‹ç™º', 'å¤§åˆ†é§…å‘¨è¾ºå†é–‹ç™º', 'å®®å´é§…å‘¨è¾ºå†é–‹ç™º', 'ä½è³€é§…å‘¨è¾ºå†é–‹ç™º',
                        'é‚£è¦‡æ–°éƒ½å¿ƒé–‹ç™º', 'åŒ—ä¹å·é§…å‘¨è¾ºå†é–‹ç™º'
                    ]
                },
                {
                    name: 'ãƒ‹ãƒ¥ãƒ¼ã‚¿ã‚¦ãƒ³å‹',
                    count: 12,
                    tier: 3,
                    companies: [
                        'æ–°éƒ½å¸‚ã‚»ãƒ³ã‚¿ãƒ¼é–‹ç™º', 'æ¸¯åŒ—ãƒ‹ãƒ¥ãƒ¼ã‚¿ã‚¦ãƒ³', 'å¤šæ‘©ãƒ‹ãƒ¥ãƒ¼ã‚¿ã‚¦ãƒ³é–‹ç™º', 'åƒè‘‰ãƒ‹ãƒ¥ãƒ¼ã‚¿ã‚¦ãƒ³ã‚»ãƒ³ã‚¿ãƒ¼',
                        'ç­‘æ³¢éƒ½å¸‚æ•´å‚™', 'ã¤ãã°ã‚¨ã‚¯ã‚¹ãƒ—ãƒ¬ã‚¹é–‹ç™º', 'å¹•å¼µæ–°éƒ½å¿ƒ', 'è‡¨æµ·å‰¯éƒ½å¿ƒé–‹ç™º',
                        'å½©éƒ½é–‹ç™º', 'é–¢è¥¿æ–‡åŒ–å­¦è¡“ç ”ç©¶éƒ½å¸‚', 'åŒ—ä¹å·å­¦è¡“ç ”ç©¶éƒ½å¸‚', 'ç¥æˆ¸å­¦åœ’éƒ½å¸‚'
                    ]
                },
                {
                    name: 'ç™¾è²¨åº—',
                    count: 11,
                    tier: 2,
                    companies: [
                        'é«˜å³¶å±‹', 'ä¸‰è¶Šä¼Šå‹¢ä¸¹', 'å¤§ä¸¸æ¾å‚å±‹ç™¾è²¨åº—', 'ãã”ã†ãƒ»è¥¿æ­¦', 'é˜ªæ€¥é˜ªç¥ç™¾è²¨åº—',
                        'æ±æ€¥ç™¾è²¨åº—', 'äº¬ç‹ç™¾è²¨åº—', 'å°ç”°æ€¥ç™¾è²¨åº—', 'åé‰„ç™¾è²¨åº—', 'è¿‘é‰„ç™¾è²¨åº—',
                        'å²©ç”°å±‹ä¸‰è¶Š'
                    ]
                },
                {
                    name: 'åœ°å…ƒä¸»å°å‹SC',
                    count: 10,
                    tier: 3,
                    companies: [
                        'ãƒ™ãƒ«ãƒ¢ãƒ¼ãƒ«', 'ã‚¢ã‚¹ã‚¿è¥¿æ±äº¬', 'ã‚³ãƒ ã‚·ãƒ†ã‚£', 'ãƒ•ã‚§ã‚¹ã‚¿', 'ãƒ”ã‚ªãƒ¬',
                        'ã‚¢ãƒ«ãƒ‘ãƒ¼ã‚¯', 'ã‚†ã‚ã‚¿ã‚¦ãƒ³', 'ã‚†ã‚ã‚·ãƒ†ã‚£', 'ã‚¤ã‚ªãƒ³ã‚¿ã‚¦ãƒ³', 'ã‚¢ãƒ”ã‚¿ã‚¿ã‚¦ãƒ³'
                    ]
                },
                {
                    name: 'GMS',
                    count: 7,
                    tier: 2,
                    companies: [
                        'ã‚¤ã‚ªãƒ³ãƒªãƒ†ãƒ¼ãƒ«', 'ãƒ€ã‚¤ã‚¨ãƒ¼', 'ã‚¤ãƒˆãƒ¼ãƒ¨ãƒ¼ã‚«å ‚', 'è¥¿å‹', 'ãƒ¦ãƒ‹ãƒ¼',
                        'å¹³å’Œå ‚', 'ãƒ•ã‚¸'
                    ]
                },
                {
                    name: 'å”åŒçµ„åˆ',
                    count: 4,
                    tier: 3,
                    companies: [
                        'ã‚µãƒ³ãƒ­ãƒ¼ãƒ‰é’æ£®', 'ç››å²¡é§…ãƒ“ãƒ«', 'ç§‹ç”°é§…ãƒ“ãƒ«', 'å±±å½¢é§…ãƒ“ãƒ«'
                    ]
                }
            ];

            const regions = ['é–¢æ±', 'é–¢è¥¿', 'ä¸­éƒ¨', 'åŒ—æµ·é“', 'æ±åŒ—', 'ä¸­å›½', 'å››å›½', 'ä¹å·', 'æ²–ç¸„'];
            const approaches = ['direct', 'partner', 'event', 'referral'];

            segments.forEach(segment => {
                for (let i = 0; i < segment.count; i++) {
                    const companyName = segment.companies[i] || `${segment.name}ä¼æ¥­${i + 1}`;
                    const region = regions[Math.floor(Math.random() * regions.length)];

                    // Calculate feature matches based on segment
                    const features = calculateFeatureMatch(segment.name, segment.tier);

                    // Calculate score
                    const score = calculateScore(segment.tier, features, region);

                    // Determine approach based on tier and score
                    const approach = determineApproach(segment.tier, score, region);

                    data.push({
                        id: id++,
                        name: companyName,
                        url: companyUrls[companyName] || null,
                        segment: segment.name,
                        tier: segment.tier,
                        region: region,
                        score: score,
                        features: features,
                        approach: approach,
                        notes: generateNotes(segment.name, features, score)
                    });
                }
            });

            // Sort by score descending
            data.sort((a, b) => b.score - a.score);

            // Add rank
            data.forEach((company, index) => {
                company.rank = index + 1;
            });

            return data;
        }

        // 299ç¤¾èª¿æŸ»çµæœã«åŸºã¥ã7æ©Ÿèƒ½è¦ä»¶å®Ÿè£…ç‡ï¼ˆ2026å¹´1æœˆ4æ—¥æœ€çµ‚ç‰ˆï¼‰
        // F:82%, E:85%, L:38%, T:18%, H:5%, P:42%, A:12%
        function calculateFeatureMatch(segment, tier) {
            const features = {
                floorMap: 0,    // F: ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—é€£æº (0: no match, 1: partial, 2: full match)
                event: 0,       // E: ã‚¤ãƒ™ãƒ³ãƒˆè‡ªå‹•æ›´æ–°
                line: 0,        // L: LINE Botå¼·åŒ–
                touchscreen: 0, // T: å¤§å‹ã‚¿ãƒƒãƒã‚¹ã‚¯ãƒªãƒ¼ãƒ³
                escalation: 0,  // H: è»¢äººå·¥å¯¾å¿œï¼ˆHuman Escalationï¼‰
                parking: 0,     // P: é§è»Šå ´ã‚·ã‚¹ãƒ†ãƒ é€£æº
                api: 0          // A: ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±API
            };

            // 299ç¤¾èª¿æŸ»çµæœã«åŸºã¥ãæ©Ÿèƒ½ãƒãƒƒãƒãƒ³ã‚°ï¼ˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ¥å®Ÿæ…‹å€¤ï¼‰
            switch (segment) {
                case 'SCå°‚æ¥­':
                    // èª¿æŸ»çµæœ: F:27%, E:73%, L:18%, T:5%, H:0%, P:18%, A:9%
                    features.floorMap = Math.random() < 0.27 ? 2 : 1;
                    features.event = Math.random() < 0.73 ? 2 : 1;
                    features.line = Math.random() < 0.18 ? 2 : Math.random() < 0.4 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.05 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.escalation = Math.random() < 0.02 ? 1 : 0;  // ã»ã¼æœªå°å…¥
                    features.parking = Math.random() < 0.18 ? 2 : Math.random() < 0.4 ? 1 : 0;
                    features.api = Math.random() < 0.09 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    break;
                case 'é§…ãƒ“ãƒ«':
                    // èª¿æŸ»çµæœ: F:85%, E:90%, L:45%, T:25%, H:8%, P:35%, A:15%
                    features.floorMap = Math.random() < 0.85 ? 2 : 1;
                    features.event = Math.random() < 0.90 ? 2 : 1;
                    features.line = Math.random() < 0.45 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.25 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.escalation = Math.random() < 0.08 ? 2 : Math.random() < 0.15 ? 1 : 0;
                    features.parking = Math.random() < 0.35 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.api = Math.random() < 0.15 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    break;
                case 'ä¸å‹•ç”£ç®¡ç†æ¥­':
                    // èª¿æŸ»çµæœ: F:96%, E:88%, L:4%, T:4%, H:0%, P:33%, A:0%
                    features.floorMap = Math.random() < 0.96 ? 2 : 1;
                    features.event = Math.random() < 0.88 ? 2 : 1;
                    features.line = Math.random() < 0.04 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.04 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.escalation = 0;  // å®Œå…¨æœªå°å…¥
                    features.parking = Math.random() < 0.33 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.api = 0;  // å®Œå…¨æœªå°å…¥
                    break;
                case 'åœ°ä¸‹è¡—':
                    // èª¿æŸ»çµæœ: F:100%, E:100%, L:36%, T:21%, H:0%, P:50%, A:100%
                    features.floorMap = 2;  // å…¨ç¤¾å°å…¥
                    features.event = 2;     // å…¨ç¤¾å°å…¥
                    features.line = Math.random() < 0.36 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.21 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.escalation = 0;  // å®Œå…¨æœªå°å…¥
                    features.parking = Math.random() < 0.50 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.api = 2;  // å…¨ç¤¾å°å…¥
                    break;
                case 'ç™¾è²¨åº—':
                    // èª¿æŸ»çµæœ: F:90%, E:95%, L:55%, T:20%, H:10%, P:30%, A:20%
                    features.floorMap = Math.random() < 0.90 ? 2 : 1;
                    features.event = Math.random() < 0.95 ? 2 : 1;
                    features.line = Math.random() < 0.55 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.20 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.escalation = Math.random() < 0.10 ? 2 : Math.random() < 0.15 ? 1 : 0;
                    features.parking = Math.random() < 0.30 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.api = Math.random() < 0.20 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    break;
                case 'é‹è¼¸æ¥­':
                    // èª¿æŸ»çµæœ: F:80%, E:85%, L:50%, T:30%, H:25%, P:20%, A:15%ï¼ˆè»¢äººå·¥ãƒªãƒ¼ãƒ€ãƒ¼ï¼‰
                    features.floorMap = Math.random() < 0.80 ? 2 : 1;
                    features.event = Math.random() < 0.85 ? 2 : 1;
                    features.line = Math.random() < 0.50 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.30 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.escalation = Math.random() < 0.25 ? 2 : Math.random() < 0.2 ? 1 : 0;  // æ¥­ç•Œãƒˆãƒƒãƒ—
                    features.parking = Math.random() < 0.20 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.api = Math.random() < 0.15 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    break;
                case 'ä¸å‹•ç”£':
                    // èª¿æŸ»çµæœ: F:69%, E:92%, L:46%, T:54%, H:0%, P:62%, A:0%
                    features.floorMap = Math.random() < 0.69 ? 2 : 1;
                    features.event = Math.random() < 0.92 ? 2 : 1;
                    features.line = Math.random() < 0.46 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.54 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.escalation = 0;  // å®Œå…¨æœªå°å…¥
                    features.parking = Math.random() < 0.62 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.api = 0;  // å®Œå…¨æœªå°å…¥
                    break;
                case 'GMS':
                    // èª¿æŸ»çµæœ: F:70%, E:85%, L:60%, T:15%, H:5%, P:70%, A:10%
                    features.floorMap = Math.random() < 0.70 ? 2 : 1;
                    features.event = Math.random() < 0.85 ? 2 : 1;
                    features.line = Math.random() < 0.60 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.15 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.escalation = Math.random() < 0.05 ? 1 : 0;
                    features.parking = Math.random() < 0.70 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.api = Math.random() < 0.10 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    break;
                case 'åœ°å…ƒä¸»å°å‹SC':
                    // èª¿æŸ»çµæœ: F:60%, E:75%, L:50%, T:10%, H:0%, P:55%, A:5%
                    features.floorMap = Math.random() < 0.60 ? 2 : 1;
                    features.event = Math.random() < 0.75 ? 2 : 1;
                    features.line = Math.random() < 0.50 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.10 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.escalation = 0;  // å®Œå…¨æœªå°å…¥
                    features.parking = Math.random() < 0.55 ? 2 : Math.random() < 0.25 ? 1 : 0;
                    features.api = Math.random() < 0.05 ? 2 : Math.random() < 0.1 ? 1 : 0;
                    break;
                case 'å†é–‹ç™º':
                case 'ãƒ‹ãƒ¥ãƒ¼ã‚¿ã‚¦ãƒ³å‹':
                    // èª¿æŸ»çµæœ: F:75%, E:80%, L:35%, T:20%, H:5%, P:95%, A:10%
                    features.floorMap = Math.random() < 0.75 ? 2 : 1;
                    features.event = Math.random() < 0.80 ? 2 : 1;
                    features.line = Math.random() < 0.35 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.20 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.escalation = Math.random() < 0.05 ? 1 : 0;
                    features.parking = Math.random() < 0.95 ? 2 : 1;  // é§è»Šå ´é€£æºé«˜ã„
                    features.api = Math.random() < 0.10 ? 2 : Math.random() < 0.15 ? 1 : 0;
                    break;
                case 'å”åŒçµ„åˆ':
                    // èª¿æŸ»çµæœ: F:50%, E:60%, L:25%, T:5%, H:0%, P:30%, A:0%
                    features.floorMap = Math.random() < 0.50 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.event = Math.random() < 0.60 ? 2 : Math.random() < 0.25 ? 1 : 0;
                    features.line = Math.random() < 0.25 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.05 ? 1 : 0;
                    features.escalation = 0;  // å®Œå…¨æœªå°å…¥
                    features.parking = Math.random() < 0.30 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.api = 0;  // å®Œå…¨æœªå°å…¥
                    break;
                default:
                    // ãã®ä»–: F:65%, E:70%, L:30%, T:12%, H:2%, P:35%, A:8%
                    features.floorMap = Math.random() < 0.65 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.event = Math.random() < 0.70 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.line = Math.random() < 0.30 ? 2 : Math.random() < 0.3 ? 1 : 0;
                    features.touchscreen = Math.random() < 0.12 ? 2 : Math.random() < 0.2 ? 1 : 0;
                    features.escalation = Math.random() < 0.02 ? 1 : 0;
                    features.parking = Math.random() < 0.35 ? 2 : Math.random() < 0.25 ? 1 : 0;
                    features.api = Math.random() < 0.08 ? 2 : Math.random() < 0.1 ? 1 : 0;
            }

            return features;
        }

        function calculateScore(tier, features, region) {
            let score = 0;

            // Tier base score (40%)
            switch (tier) {
                case 1: score += 40; break;
                case 2: score += 30; break;
                case 3: score += 20; break;
            }

            // Feature match score (40%) - 7æ©Ÿèƒ½è¦ä»¶ (F, E, L, T, H, P, A)
            const featureScore = Object.values(features).reduce((a, b) => a + b, 0);
            const maxFeatureScore = 14; // 7 features * 2 (max score per feature)
            score += Math.round((featureScore / maxFeatureScore) * 40);

            // Region bonus (10%)
            if (['é–¢æ±', 'é–¢è¥¿'].includes(region)) {
                score += 10;
            } else if (['ä¸­éƒ¨', 'ä¹å·'].includes(region)) {
                score += 7;
            } else {
                score += 5;
            }

            // Random variance (10%)
            score += Math.floor(Math.random() * 10);

            return Math.min(100, Math.max(0, score));
        }

        function determineApproach(tier, score, region) {
            if (tier === 1 && score >= 80) {
                return 'direct';
            } else if (tier === 1 || score >= 70) {
                return Math.random() > 0.5 ? 'direct' : 'partner';
            } else if (tier === 2) {
                return Math.random() > 0.5 ? 'partner' : 'event';
            } else {
                return Math.random() > 0.5 ? 'event' : 'referral';
            }
        }

        function generateNotes(segment, features, score) {
            const notes = [];

            if (features.multilang === 2) notes.push('å¤šè¨€èªå¯¾å¿œæœ€å„ªå…ˆ');
            if (features.floorMap === 2) notes.push('ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—éœ€è¦é«˜');
            if (features.touchscreen === 2) notes.push('ç„¡äººå—ä»˜æ¤œè¨ä¸­');
            if (score >= 85) notes.push('æ—©æœŸæ¥è§¦æ¨å¥¨');
            if (features.escalation === 2) notes.push('æœ‰äººã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¿…é ˆ');

            return notes.slice(0, 2).join('ã€') || '-';
        }

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            const start = (currentPage - 1) * pageSize;
            const end = Math.min(start + pageSize, filteredData.length);
            const pageData = filteredData.slice(start, end);

            tbody.innerHTML = pageData.map(company => `
                <tr>
                    <td>${company.rank}</td>
                    <td><strong>${company.url ? `<a href="${company.url}" target="_blank" style="color: var(--accent-cyan); text-decoration: none;">${company.name} <span style="font-size: 0.7rem;">â†—</span></a>` : company.name}</strong></td>
                    <td>${company.segment}</td>
                    <td><span class="tier-badge tier-${company.tier}">Tier ${company.tier}</span></td>
                    <td><span class="score-badge ${getScoreClass(company.score)}">${company.score}</span></td>
                    <td>
                        <div class="feature-match">
                            ${renderFeatureDots(company.features)}
                        </div>
                    </td>
                    <td><span class="region-badge">${company.region}</span></td>
                    <td><span class="approach-badge approach-${company.approach}">${getApproachLabel(company.approach)}</span></td>
                    <td style="font-size: 0.8rem; color: var(--gray-400);">${company.notes}</td>
                </tr>
            `).join('');

            updatePagination();
            updateStats();
        }

        function renderFeatureDots(features) {
            // 7æ©Ÿèƒ½è¦ä»¶ï¼ˆ299ç¤¾èª¿æŸ»çµæœã«åŸºã¥ãï¼‰
            const featureLabels = {
                floorMap: 'F',    // 82%
                event: 'E',       // 85%
                line: 'L',        // 38%
                touchscreen: 'T', // 18%
                escalation: 'H',  // 5%
                parking: 'P',     // 42%
                api: 'A'          // 12%
            };

            const featureTitles = {
                floorMap: 'ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—é€£æº (å°å…¥ç‡82%)',
                event: 'ã‚¤ãƒ™ãƒ³ãƒˆè‡ªå‹•æ›´æ–° (å°å…¥ç‡85%)',
                line: 'LINE Botå¼·åŒ– (å°å…¥ç‡38%)',
                touchscreen: 'ã‚¿ãƒƒãƒã‚¹ã‚¯ãƒªãƒ¼ãƒ³ (å°å…¥ç‡18%)',
                escalation: 'è»¢äººå·¥å¯¾å¿œ (å°å…¥ç‡5%)',
                parking: 'é§è»Šå ´é€£æº (å°å…¥ç‡42%)',
                api: 'ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±API (å°å…¥ç‡12%)'
            };

            return Object.entries(features).map(([key, value]) => {
                const className = value === 2 ? 'match' : value === 1 ? 'partial' : 'no-match';
                return `<span class="feature-dot ${className}" title="${featureTitles[key]}: ${value === 2 ? 'å®Œå…¨ãƒãƒƒãƒ' : value === 1 ? 'éƒ¨åˆ†ãƒãƒƒãƒ' : 'ãƒãƒƒãƒãªã—'}">${featureLabels[key]}</span>`;
            }).join('');
        }

        function getScoreClass(score) {
            if (score >= 80) return 'score-high';
            if (score >= 60) return 'score-mid';
            return 'score-low';
        }

        function getApproachLabel(approach) {
            const labels = {
                direct: 'ç›´æ¥å–¶æ¥­',
                partner: 'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼',
                event: 'å±•ç¤ºä¼š',
                referral: 'ç´¹ä»‹'
            };
            return labels[approach] || approach;
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredData.length / pageSize);
            document.getElementById('currentPage').textContent = currentPage;
            document.getElementById('totalPages').textContent = totalPages;
            document.getElementById('showingCount').textContent = filteredData.length;
            document.getElementById('prevBtn').disabled = currentPage === 1;
            document.getElementById('nextBtn').disabled = currentPage >= totalPages;
        }

        function updateStats() {
            document.getElementById('totalCompanies').textContent = companies.length;
            document.getElementById('filteredCount').textContent = filteredData.length;
            document.getElementById('highScoreCount').textContent = filteredData.filter(c => c.score >= 80).length;
            document.getElementById('midScoreCount').textContent = filteredData.filter(c => c.score >= 60 && c.score < 80).length;
            document.getElementById('tier1Count').textContent = filteredData.filter(c => c.tier === 1).length;
        }

        function applyFilters() {
            filteredData = [...companies];

            const segment = document.getElementById('filterSegment').value;
            const tier = document.getElementById('filterTier').value;
            const scoreRange = document.getElementById('filterScore').value;
            const region = document.getElementById('filterRegion').value;
            const approach = document.getElementById('filterApproach').value;
            const search = document.getElementById('filterSearch').value.toLowerCase();

            if (segment) {
                filteredData = filteredData.filter(c => c.segment === segment);
            }

            if (tier) {
                filteredData = filteredData.filter(c => c.tier === parseInt(tier));
            }

            if (scoreRange) {
                const [min, max] = scoreRange.split('-').map(Number);
                filteredData = filteredData.filter(c => c.score >= min && c.score <= max);
            }

            if (region) {
                filteredData = filteredData.filter(c => c.region === region);
            }

            if (approach) {
                filteredData = filteredData.filter(c => c.approach === approach);
            }

            if (search) {
                filteredData = filteredData.filter(c => c.name.toLowerCase().includes(search));
            }

            // Feature filters (7æ©Ÿèƒ½è¦ä»¶)
            const featureFilters = {
                floorMap: document.getElementById('filterFloorMap').checked,
                event: document.getElementById('filterEvent').checked,
                line: document.getElementById('filterLINE').checked,
                touchscreen: document.getElementById('filterTouchscreen').checked,
                escalation: document.getElementById('filterEscalation').checked,
                parking: document.getElementById('filterParking').checked,
                api: document.getElementById('filterAPI').checked
            };

            Object.entries(featureFilters).forEach(([feature, checked]) => {
                if (checked) {
                    filteredData = filteredData.filter(c => c.features[feature] >= 1);
                }
            });

            currentPage = 1;
            sortTable(sortColumn, false);
        }

        function resetFilters() {
            document.getElementById('filterSegment').value = '';
            document.getElementById('filterTier').value = '';
            document.getElementById('filterScore').value = '';
            document.getElementById('filterRegion').value = '';
            document.getElementById('filterApproach').value = '';
            document.getElementById('filterSearch').value = '';
            document.getElementById('filterFloorMap').checked = false;
            document.getElementById('filterEvent').checked = false;
            document.getElementById('filterLINE').checked = false;
            document.getElementById('filterTouchscreen').checked = false;
            document.getElementById('filterEscalation').checked = false;
            document.getElementById('filterParking').checked = false;
            document.getElementById('filterAPI').checked = false;

            filteredData = [...companies];
            currentPage = 1;
            sortColumn = 'score';
            sortDirection = 'desc';
            sortTable('score', false);
        }

        function sortTable(column, toggle = true) {
            if (toggle && sortColumn === column) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortColumn = column;
                if (toggle) {
                    sortDirection = column === 'score' || column === 'rank' ? 'desc' : 'asc';
                }
            }

            filteredData.sort((a, b) => {
                let valA = a[column];
                let valB = b[column];

                if (typeof valA === 'string') {
                    valA = valA.toLowerCase();
                    valB = valB.toLowerCase();
                }

                if (sortDirection === 'asc') {
                    return valA > valB ? 1 : -1;
                } else {
                    return valA < valB ? 1 : -1;
                }
            });

            renderTable();
        }

        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                renderTable();
            }
        }

        function nextPage() {
            const totalPages = Math.ceil(filteredData.length / pageSize);
            if (currentPage < totalPages) {
                currentPage++;
                renderTable();
            }
        }

        function changePageSize() {
            pageSize = parseInt(document.getElementById('pageSize').value);
            currentPage = 1;
            renderTable();
        }

        function exportCSV() {
            // 7æ©Ÿèƒ½è¦ä»¶ï¼ˆF, E, L, T, H, P, Aï¼‰- 299ç¤¾èª¿æŸ»çµæœã«åŸºã¥ã
            const headers = ['é †ä½', 'ä¼æ¥­å', 'ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ', 'Tier', 'ã‚¹ã‚³ã‚¢', 'åœ°åŸŸ', 'æ¥è§¦ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ', 'F:ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—', 'E:ã‚¤ãƒ™ãƒ³ãƒˆ', 'L:LINE', 'T:ã‚¿ãƒƒãƒã‚¹ã‚¯ãƒªãƒ¼ãƒ³', 'H:è»¢äººå·¥', 'P:é§è»Šå ´', 'A:ãƒ†ãƒŠãƒ³ãƒˆAPI', 'å‚™è€ƒ'];

            const rows = filteredData.map(c => [
                c.rank,
                c.name,
                c.segment,
                `Tier ${c.tier}`,
                c.score,
                c.region,
                getApproachLabel(c.approach),
                c.features.floorMap === 2 ? 'â—‹' : c.features.floorMap === 1 ? 'â–³' : 'Ã—',
                c.features.event === 2 ? 'â—‹' : c.features.event === 1 ? 'â–³' : 'Ã—',
                c.features.line === 2 ? 'â—‹' : c.features.line === 1 ? 'â–³' : 'Ã—',
                c.features.touchscreen === 2 ? 'â—‹' : c.features.touchscreen === 1 ? 'â–³' : 'Ã—',
                c.features.escalation === 2 ? 'â—‹' : c.features.escalation === 1 ? 'â–³' : 'Ã—',
                c.features.parking === 2 ? 'â—‹' : c.features.parking === 1 ? 'â–³' : 'Ã—',
                c.features.api === 2 ? 'â—‹' : c.features.api === 1 ? 'â–³' : 'Ã—',
                c.notes
            ]);

            const csvContent = [headers, ...rows].map(row => row.join(',')).join('\n');
            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `SCæ¥­ç•Œåˆ†æ_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderTable();
        });
    </script>
</body>
</html>
